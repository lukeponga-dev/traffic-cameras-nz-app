{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/traffic-cameras-nz-app/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }"],"names":[],"mappings":";;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAC3B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,8OAAC;QACC,MAAM;QACN,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,iWACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 36, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/traffic-cameras-nz-app/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACvB,4VACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAC5B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,gKAAA,CAAA,OAAI,GAAG;IAC9B,qBACE,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,OAAO,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 120, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/traffic-cameras-nz-app/src/components/header.tsx"],"sourcesContent":["\n\"use client\";\n\nimport { Input } from \"./ui/input\";\nimport { TrafficCone, Search, Loader2, Menu, Heart, X, LocateFixed, Map, List, Sidebar } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\nimport { Button } from \"./ui/button\";\nimport Link from \"next/link\";\nimport { usePathname } from \"next/navigation\";\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\n\nexport function Header({ \n    cameraCount,\n    searchTerm,\n    onSearchChange,\n    onMyLocationClick,\n    isTracking,\n    showSearch = true,\n}: { \n    cameraCount?: number;\n    searchTerm?: string;\n    onSearchChange?: (term: string) => void;\n    onMyLocationClick?: () => void;\n    isTracking?: boolean;\n    showSearch?: boolean;\n}) {\n  const pathname = usePathname();\n\n  return (\n    <header className=\"fixed top-0 left-0 right-0 z-30 bg-background/80 backdrop-blur-sm border-b\">\n      <div className=\"container mx-auto px-4\">\n        <div className=\"flex items-center justify-between gap-4 h-16\">\n            \n            <Link href=\"/\" className=\"flex items-center gap-2\">\n                <TrafficCone className=\"h-6 w-6 text-primary\" />\n                <h1 className=\"text-xl font-bold tracking-tight hidden sm:block\">\n                    Kiwi Traffic Watch\n                </h1>\n            </Link>\n            \n            {showSearch && (\n                <div className=\"flex-1 flex justify-center px-4 md:px-8\">\n                     <div className=\"relative w-full max-w-lg\">\n                        <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n                        <Input\n                            type=\"search\"\n                            placeholder=\"Search cameras...\"\n                            className=\"pl-9 h-10 text-base w-full bg-muted rounded-full border-transparent focus:border-primary focus:ring-primary\"\n                            value={searchTerm}\n                            onChange={(e) => onSearchChange?.(e.target.value)}\n                        />\n                    </div>\n                </div>\n            )}\n\n            <div className=\"flex items-center gap-1.5 ml-auto\">\n                {onMyLocationClick && (\n                  <Tooltip>\n                      <TooltipTrigger asChild>\n                          <Button variant=\"ghost\" size=\"icon\" onClick={onMyLocationClick}>\n                              <LocateFixed className={cn(\"h-5 w-5\", isTracking && \"text-primary\")} />\n                              <span className=\"sr-only\">{isTracking ? \"Disable live location\" : \"Enable live location\"}</span>\n                          </Button>\n                      </TooltipTrigger>\n                      <TooltipContent>\n                          <p>{isTracking ? \"Disable live location\" : \"Enable live location\"}</p>\n                      </TooltipContent>\n                  </Tooltip>\n                )}\n            </div>\n        </div>\n      </div>\n    </header>\n  );\n}\n"],"names":[],"mappings":";;;;AAGA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AARA;;;;;;;;;AAeO,SAAS,OAAO,EACnB,WAAW,EACX,UAAU,EACV,cAAc,EACd,iBAAiB,EACjB,UAAU,EACV,aAAa,IAAI,EAQpB;IACC,MAAM,WAAW,CAAA,GAAA,kIAAA,CAAA,cAAW,AAAD;IAE3B,qBACE,8OAAC;QAAO,WAAU;kBAChB,cAAA,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCAEX,8OAAC,4JAAA,CAAA,UAAI;wBAAC,MAAK;wBAAI,WAAU;;0CACrB,8OAAC,oNAAA,CAAA,cAAW;gCAAC,WAAU;;;;;;0CACvB,8OAAC;gCAAG,WAAU;0CAAmD;;;;;;;;;;;;oBAKpE,4BACG,8OAAC;wBAAI,WAAU;kCACV,cAAA,8OAAC;4BAAI,WAAU;;8CACZ,8OAAC,sMAAA,CAAA,SAAM;oCAAC,WAAU;;;;;;8CAClB,8OAAC,iIAAA,CAAA,QAAK;oCACF,MAAK;oCACL,aAAY;oCACZ,WAAU;oCACV,OAAO;oCACP,UAAU,CAAC,IAAM,iBAAiB,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;;;;;;kCAMhE,8OAAC;wBAAI,WAAU;kCACV,mCACC,8OAAC,mIAAA,CAAA,UAAO;;8CACJ,8OAAC,mIAAA,CAAA,iBAAc;oCAAC,OAAO;8CACnB,cAAA,8OAAC,kIAAA,CAAA,SAAM;wCAAC,SAAQ;wCAAQ,MAAK;wCAAO,SAAS;;0DACzC,8OAAC,oNAAA,CAAA,cAAW;gDAAC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,WAAW,cAAc;;;;;;0DACpD,8OAAC;gDAAK,WAAU;0DAAW,aAAa,0BAA0B;;;;;;;;;;;;;;;;;8CAG1E,8OAAC,mIAAA,CAAA,iBAAc;8CACX,cAAA,8OAAC;kDAAG,aAAa,0BAA0B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASrE","debugId":null}},
    {"offset": {"line": 294, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/traffic-cameras-nz-app/src/components/ui/skeleton.tsx"],"sourcesContent":["import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n"],"names":[],"mappings":";;;;AAAA;;;AAEA,SAAS,SAAS,EAChB,SAAS,EACT,GAAG,OACkC;IACrC,qBACE,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,qCAAqC;QAClD,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 318, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/traffic-cameras-nz-app/src/lib/map-styles.ts"],"sourcesContent":["\nexport const darkMapStyle = [\n  { elementType: \"geometry\", stylers: [{ color: \"#242f3e\" }] },\n  { elementType: \"labels.text.stroke\", stylers: [{ color: \"#242f3e\" }] },\n  { elementType: \"labels.text.fill\", stylers: [{ color: \"#746855\" }] },\n  {\n    featureType: \"administrative.locality\",\n    elementType: \"labels.text.fill\",\n    stylers: [{ color: \"#d59563\" }],\n  },\n  {\n    featureType: \"poi\",\n    elementType: \"labels.text.fill\",\n    stylers: [{ color: \"#d59563\" }],\n  },\n  {\n    featureType: \"poi.park\",\n    elementType: \"geometry\",\n    stylers: [{ color: \"#263c3f\" }],\n  },\n  {\n    featureType: \"poi.park\",\n    elementType: \"labels.text.fill\",\n    stylers: [{ color: \"#6b9a76\" }],\n  },\n  {\n    featureType: \"road\",\n    elementType: \"geometry\",\n    stylers: [{ color: \"#38414e\" }],\n  },\n  {\n    featureType: \"road\",\n    elementType: \"geometry.stroke\",\n    stylers: [{ color: \"#212a37\" }],\n  },\n  {\n    featureType: \"road\",\n    elementType: \"labels.text.fill\",\n    stylers: [{ color: \"#9ca5b3\" }],\n  },\n  {\n    featureType: \"road.highway\",\n    elementType: \"geometry\",\n    stylers: [{ color: \"#746855\" }],\n  },\n  {\n    featureType: \"road.highway\",\n    elementType: \"geometry.stroke\",\n    stylers: [{ color: \"#1f2835\" }],\n  },\n  {\n    featureType: \"road.highway\",\n    elementType: \"labels.text.fill\",\n    stylers: [{ color: \"#f3d19c\" }],\n  },\n  {\n    featureType: \"transit\",\n    elementType: \"geometry\",\n    stylers: [{ color: \"#2f3948\" }],\n  },\n  {\n    featureType: \"transit.station\",\n    elementType: \"labels.text.fill\",\n    stylers: [{ color: \"#d59563\" }],\n  },\n  {\n    featureType: \"water\",\n    elementType: \"geometry\",\n    stylers: [{ color: \"#17263c\" }],\n  },\n  {\n    featureType: \"water\",\n    elementType: \"labels.text.fill\",\n    stylers: [{ color: \"#515c6d\" }],\n  },\n  {\n    featureType: \"water\",\n    elementType: \"labels.text.stroke\",\n    stylers: [{ color: \"#17263c\" }],\n  },\n];\n"],"names":[],"mappings":";;;AACO,MAAM,eAAe;IAC1B;QAAE,aAAa;QAAY,SAAS;YAAC;gBAAE,OAAO;YAAU;SAAE;IAAC;IAC3D;QAAE,aAAa;QAAsB,SAAS;YAAC;gBAAE,OAAO;YAAU;SAAE;IAAC;IACrE;QAAE,aAAa;QAAoB,SAAS;YAAC;gBAAE,OAAO;YAAU;SAAE;IAAC;IACnE;QACE,aAAa;QACb,aAAa;QACb,SAAS;YAAC;gBAAE,OAAO;YAAU;SAAE;IACjC;IACA;QACE,aAAa;QACb,aAAa;QACb,SAAS;YAAC;gBAAE,OAAO;YAAU;SAAE;IACjC;IACA;QACE,aAAa;QACb,aAAa;QACb,SAAS;YAAC;gBAAE,OAAO;YAAU;SAAE;IACjC;IACA;QACE,aAAa;QACb,aAAa;QACb,SAAS;YAAC;gBAAE,OAAO;YAAU;SAAE;IACjC;IACA;QACE,aAAa;QACb,aAAa;QACb,SAAS;YAAC;gBAAE,OAAO;YAAU;SAAE;IACjC;IACA;QACE,aAAa;QACb,aAAa;QACb,SAAS;YAAC;gBAAE,OAAO;YAAU;SAAE;IACjC;IACA;QACE,aAAa;QACb,aAAa;QACb,SAAS;YAAC;gBAAE,OAAO;YAAU;SAAE;IACjC;IACA;QACE,aAAa;QACb,aAAa;QACb,SAAS;YAAC;gBAAE,OAAO;YAAU;SAAE;IACjC;IACA;QACE,aAAa;QACb,aAAa;QACb,SAAS;YAAC;gBAAE,OAAO;YAAU;SAAE;IACjC;IACA;QACE,aAAa;QACb,aAAa;QACb,SAAS;YAAC;gBAAE,OAAO;YAAU;SAAE;IACjC;IACA;QACE,aAAa;QACb,aAAa;QACb,SAAS;YAAC;gBAAE,OAAO;YAAU;SAAE;IACjC;IACA;QACE,aAAa;QACb,aAAa;QACb,SAAS;YAAC;gBAAE,OAAO;YAAU;SAAE;IACjC;IACA;QACE,aAAa;QACb,aAAa;QACb,SAAS;YAAC;gBAAE,OAAO;YAAU;SAAE;IACjC;IACA;QACE,aAAa;QACb,aAAa;QACb,SAAS;YAAC;gBAAE,OAAO;YAAU;SAAE;IACjC;IACA;QACE,aAAa;QACb,aAAa;QACb,SAAS;YAAC;gBAAE,OAAO;YAAU;SAAE;IACjC;CACD","debugId":null}},
    {"offset": {"line": 488, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/traffic-cameras-nz-app/src/hooks/use-favorites.ts"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, useCallback } from 'react';\n\nconst FAVORITES_KEY = 'kiwi-traffic-watch-favorites';\n\nexport function useFavorites() {\n    const [favoriteIds, setFavoriteIds] = useState<string[]>([]);\n    const [isLoaded, setIsLoaded] = useState(false);\n\n    useEffect(() => {\n        try {\n            const item = window.localStorage.getItem(FAVORITES_KEY);\n            if (item) {\n                setFavoriteIds(JSON.parse(item));\n            }\n        } catch (error) {\n            console.error(\"Failed to parse favorites from localStorage\", error);\n            setFavoriteIds([]);\n        }\n        setIsLoaded(true);\n    }, []);\n\n    const updateLocalStorage = (ids: string[]) => {\n         try {\n            window.localStorage.setItem(FAVORITES_KEY, JSON.stringify(ids));\n        } catch (error) {\n            console.error(\"Failed to set favorites in localStorage\", error);\n        }\n    };\n\n    const addFavorite = useCallback((id: string) => {\n        setFavoriteIds(prevIds => {\n            if (prevIds.includes(id)) return prevIds;\n            const newIds = [...prevIds, id];\n            updateLocalStorage(newIds);\n            return newIds;\n        });\n    }, []);\n\n    const removeFavorite = useCallback((id: string) => {\n        setFavoriteIds(prevIds => {\n            const newIds = prevIds.filter(favId => favId !== id);\n            updateLocalStorage(newIds);\n            return newIds;\n        });\n    }, []);\n    \n    const toggleFavorite = useCallback((id: string) => {\n        setFavoriteIds(prevIds => {\n            const isFav = prevIds.includes(id);\n            const newIds = isFav ? prevIds.filter(favId => favId !== id) : [...prevIds, id];\n            updateLocalStorage(newIds);\n            return newIds;\n        });\n    }, []);\n\n    const isFavorite = useCallback((id: string) => {\n        return favoriteIds.includes(id);\n    }, [favoriteIds]);\n\n    return { favoriteIds, addFavorite, removeFavorite, isFavorite, toggleFavorite, isLoaded };\n}\n"],"names":[],"mappings":";;;AAEA;AAFA;;AAIA,MAAM,gBAAgB;AAEf,SAAS;IACZ,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAY,EAAE;IAC3D,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEzC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACN,IAAI;YACA,MAAM,OAAO,OAAO,YAAY,CAAC,OAAO,CAAC;YACzC,IAAI,MAAM;gBACN,eAAe,KAAK,KAAK,CAAC;YAC9B;QACJ,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,+CAA+C;YAC7D,eAAe,EAAE;QACrB;QACA,YAAY;IAChB,GAAG,EAAE;IAEL,MAAM,qBAAqB,CAAC;QACvB,IAAI;YACD,OAAO,YAAY,CAAC,OAAO,CAAC,eAAe,KAAK,SAAS,CAAC;QAC9D,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,2CAA2C;QAC7D;IACJ;IAEA,MAAM,cAAc,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE,CAAC;QAC7B,eAAe,CAAA;YACX,IAAI,QAAQ,QAAQ,CAAC,KAAK,OAAO;YACjC,MAAM,SAAS;mBAAI;gBAAS;aAAG;YAC/B,mBAAmB;YACnB,OAAO;QACX;IACJ,GAAG,EAAE;IAEL,MAAM,iBAAiB,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE,CAAC;QAChC,eAAe,CAAA;YACX,MAAM,SAAS,QAAQ,MAAM,CAAC,CAAA,QAAS,UAAU;YACjD,mBAAmB;YACnB,OAAO;QACX;IACJ,GAAG,EAAE;IAEL,MAAM,iBAAiB,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE,CAAC;QAChC,eAAe,CAAA;YACX,MAAM,QAAQ,QAAQ,QAAQ,CAAC;YAC/B,MAAM,SAAS,QAAQ,QAAQ,MAAM,CAAC,CAAA,QAAS,UAAU,MAAM;mBAAI;gBAAS;aAAG;YAC/E,mBAAmB;YACnB,OAAO;QACX;IACJ,GAAG,EAAE;IAEL,MAAM,aAAa,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE,CAAC;QAC5B,OAAO,YAAY,QAAQ,CAAC;IAChC,GAAG;QAAC;KAAY;IAEhB,OAAO;QAAE;QAAa;QAAa;QAAgB;QAAY;QAAgB;IAAS;AAC5F","debugId":null}},
    {"offset": {"line": 566, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/traffic-cameras-nz-app/src/components/favorite-button.tsx"],"sourcesContent":["\"use client\";\n\nimport { Star, Loader2 } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { useFavorites } from \"@/hooks/use-favorites\";\nimport { cn } from \"@/lib/utils\";\n\nexport default function FavoriteButton({ id }: { id: string }) {\n  const { isFavorite, toggleFavorite, isLoaded } = useFavorites();\n  const isFav = isFavorite(id);\n\n  if (!isLoaded) {\n    return (\n      <Button variant=\"ghost\" size=\"icon\" disabled>\n        <Loader2 className=\"h-5 w-5 animate-spin\" />\n      </Button>\n    );\n  }\n\n  return (\n    <Button\n      variant=\"ghost\"\n      size=\"icon\"\n      onClick={(e) => {\n        e.preventDefault();\n        toggleFavorite(id);\n      }}\n      aria-label={isFav ? \"Remove from favorites\" : \"Add to favorites\"}\n    >\n      <Star\n        className={cn(\n          \"h-5 w-5 transition-all duration-300\",\n          isFav\n            ? \"fill-yellow-400 text-yellow-400\"\n            : \"text-muted-foreground hover:text-yellow-400\"\n        )}\n      />\n    </Button>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AAAA;AACA;AACA;AACA;AALA;;;;;;AAOe,SAAS,eAAe,EAAE,EAAE,EAAkB;IAC3D,MAAM,EAAE,UAAU,EAAE,cAAc,EAAE,QAAQ,EAAE,GAAG,CAAA,GAAA,gIAAA,CAAA,eAAY,AAAD;IAC5D,MAAM,QAAQ,WAAW;IAEzB,IAAI,CAAC,UAAU;QACb,qBACE,8OAAC,kIAAA,CAAA,SAAM;YAAC,SAAQ;YAAQ,MAAK;YAAO,QAAQ;sBAC1C,cAAA,8OAAC,iNAAA,CAAA,UAAO;gBAAC,WAAU;;;;;;;;;;;IAGzB;IAEA,qBACE,8OAAC,kIAAA,CAAA,SAAM;QACL,SAAQ;QACR,MAAK;QACL,SAAS,CAAC;YACR,EAAE,cAAc;YAChB,eAAe;QACjB;QACA,cAAY,QAAQ,0BAA0B;kBAE9C,cAAA,8OAAC,kMAAA,CAAA,OAAI;YACH,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,uCACA,QACI,oCACA;;;;;;;;;;;AAKd","debugId":null}},
    {"offset": {"line": 629, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/traffic-cameras-nz-app/src/components/map-display.tsx"],"sourcesContent":["\n\"use client\";\n\nimport { useState, useCallback, useEffect, useMemo } from 'react';\nimport type { Camera } from '@/lib/types';\nimport { Map, AdvancedMarker, InfoWindow, useMap } from '@vis.gl/react-google-maps';\nimport Image from 'next/image';\nimport Link from 'next/link';\nimport { Button } from './ui/button';\nimport { ExternalLink, Milestone, Zap, Camera as CameraIcon } from 'lucide-react';\nimport { Skeleton } from './ui/skeleton';\nimport { darkMapStyle } from '@/lib/map-styles';\nimport FavoriteButton from './favorite-button';\nimport { cn } from '@/lib/utils';\n\nconst NZ_CENTER = { lat: -41.28664, lng: 174.77557 };\nconst INITIAL_ZOOM = 5;\n\ntype LatLng = { lat: number; lng: number; };\n\nexport default function MapDisplay({ \n    cameras, \n    selectedCamera,\n    onCameraSelect,\n    userLocation,\n    center\n}: { \n    cameras: Camera[]; \n    selectedCamera: Camera | null;\n    onCameraSelect: (camera: Camera | null) => void;\n    userLocation: LatLng | null;\n    center: LatLng | null;\n}) {\n    const map = useMap();\n    \n    const handleMarkerClick = useCallback((camera: Camera) => {\n        onCameraSelect(camera);\n    }, [onCameraSelect]);\n\n    const handleCloseInfoWindow = useCallback(() => {\n        onCameraSelect(null);\n    }, [onCameraSelect]);\n\n    useEffect(() => {\n        if (center && map) {\n            map.panTo(center);\n            if(userLocation && center.lat === userLocation.lat && center.lng === userLocation.lng) {\n                map.setZoom(14);\n            }\n        }\n    }, [center, map, userLocation]);\n\n    useEffect(() => {\n        if (selectedCamera && map) {\n            map.panTo({ lat: selectedCamera.latitude, lng: selectedCamera.longitude });\n            map.setZoom(15);\n        }\n    }, [selectedCamera, map]);\n\n    return (\n        <div className=\"w-full h-full bg-muted relative\">\n            <Map\n                defaultCenter={NZ_CENTER}\n                defaultZoom={INITIAL_ZOOM}\n                gestureHandling={'greedy'}\n                disableDefaultUI={true}\n                mapId=\"kiwi-traffic-map-dark\"\n                styles={darkMapStyle}\n                onDragstart={handleCloseInfoWindow}\n            >\n                {cameras.map((camera) => {\n                    const isSelected = selectedCamera?.id === camera.id;\n                    return (\n                        <AdvancedMarker\n                            key={camera.id}\n                            position={{ lat: camera.latitude, lng: camera.longitude }}\n                            onClick={() => handleMarkerClick(camera)}\n                        >\n                            <div className={cn(\n                                \"w-7 h-7 rounded-full border-2 shadow-lg transition-all flex items-center justify-center\",\n                                isSelected \n                                ? \"bg-primary border-white scale-125\" \n                                : \"bg-background border-muted-foreground/50 hover:bg-primary/20\"\n                            )}>\n                                <CameraIcon className={cn(\n                                    \"h-4 w-4\",\n                                    isSelected ? \"text-primary-foreground\" : \"text-foreground\"\n                                )} />\n                            </div>\n                        </AdvancedMarker>\n                    )\n                })}\n                \n                {userLocation && (\n                    <AdvancedMarker position={userLocation}>\n                         <div className=\"w-5 h-5 rounded-full bg-blue-500 border-2 border-white ring-4 ring-blue-500/50 flex items-center justify-center shadow-lg\">\n                        </div>\n                    </AdvancedMarker>\n                )}\n\n                {selectedCamera && (\n                    <InfoWindow\n                        position={{ lat: selectedCamera.latitude, lng: selectedCamera.longitude }}\n                        onCloseClick={handleCloseInfoWindow}\n                        minWidth={320}\n                        headerDisabled\n                        pixelOffset={[0, -45]}\n                    >\n                        <div className=\"p-1 bg-background text-foreground rounded-lg font-sans\">\n                             <div className=\"aspect-video relative mb-2 rounded-md overflow-hidden bg-muted\">\n                                <Skeleton className=\"absolute inset-0\" />\n                                <Image\n                                    src={selectedCamera.imageUrl}\n                                    alt={`Live feed from ${selectedCamera.name}`}\n                                    fill\n                                    className=\"object-cover\"\n                                    sizes=\"320px\"\n                                    unoptimized\n                                />\n                                <div className=\"absolute top-1 right-1 z-10\">\n                                    <FavoriteButton id={selectedCamera.id} />\n                                </div>\n                            </div>\n                             <h3 className=\"font-bold text-base mb-1 px-1 truncate\">{selectedCamera.name}</h3>\n                             <div className=\"flex items-center gap-4 text-sm text-muted-foreground mb-3 px-1\">\n                                <div className=\"flex items-center gap-1.5\">\n                                    <Zap className=\"h-3.5 w-3.5\" />\n                                    <span>{selectedCamera.direction}</span>\n                                </div>\n                                {selectedCamera.highway && (\n                                <div className=\"flex items-center gap-1.5\">\n                                    <Milestone className=\"h-3.5 w-3.5\" />\n                                    <span>{selectedCamera.highway}</span>\n                                </div>\n                                )}\n                            </div>\n                            <Button asChild size=\"sm\" className=\"w-full\">\n                                <Link href={`/cameras/${selectedCamera.id}`}>\n                                    View Full Details\n                                    <ExternalLink className=\"ml-2 h-4 w-4\" />\n                                </Link>\n                            </Button>\n                        </div>\n                    </InfoWindow>\n                )}\n            </Map>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 927, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/traffic-cameras-nz-app/src/app/home-page-client.tsx"],"sourcesContent":["\n\"use client\";\n\nimport { useEffect, useState, useMemo, useRef } from 'react';\nimport type { Camera } from '@/lib/types';\nimport { Header } from '@/components/header';\nimport MapDisplay from '@/components/map-display';\nimport { useToast } from '@/hooks/use-toast';\nimport { useRouter } from 'next/navigation';\n\ntype LatLng = { lat: number; lng: number };\n\nexport default function HomePageClient({ cameras: initialCameras }: { cameras: Camera[] }) {\n    const router = useRouter();\n    const [searchTerm, setSearchTerm] = useState('');\n    const [selectedCamera, setSelectedCamera] = useState<Camera | null>(null);\n    const [userLocation, setUserLocation] = useState<LatLng | null>(null);\n    const [center, setCenter] = useState<LatLng | null>(null);\n    const [isTracking, setIsTracking] = useState(false);\n\n    const watchIdRef = useRef<number | null>(null);\n    const { toast } = useToast();\n    \n    const isInitialMount = useRef(true);\n\n    useEffect(() => {\n        if (isInitialMount.current) {\n            isInitialMount.current = false;\n            return;\n        }\n        if (isTracking) {\n             toast({\n                title: \"Live location enabled\",\n                description: \"Your position will be updated automatically.\"\n            });\n        } else {\n             toast({\n                title: \"Live location disabled\",\n            });\n        }\n    }, [isTracking, toast]);\n\n    useEffect(() => {\n        if (!isTracking) {\n            if (watchIdRef.current) {\n                navigator.geolocation.clearWatch(watchIdRef.current);\n                watchIdRef.current = null;\n            }\n            return;\n        }\n\n        if (!navigator.geolocation) {\n            toast({\n                variant: 'destructive',\n                title: 'Geolocation not supported',\n                description: \"Your browser doesn't support geolocation.\",\n            });\n            setIsTracking(false);\n            return;\n        }\n\n        watchIdRef.current = navigator.geolocation.watchPosition(\n            (position) => {\n                const newPos = {\n                    lat: position.coords.latitude,\n                    lng: position.coords.longitude,\n                };\n                setUserLocation(newPos);\n                setCenter(newPos);\n            },\n            () => {\n                 toast({\n                    variant: 'destructive',\n                    title: 'Geolocation failed',\n                    description: 'Could not get your location. Please ensure you have granted permission.',\n                });\n                setIsTracking(false);\n            },\n            {\n                enableHighAccuracy: true,\n                timeout: 10000,\n                maximumAge: 0,\n            }\n        );\n\n        return () => {\n            if (watchIdRef.current) {\n                navigator.geolocation.clearWatch(watchIdRef.current);\n            }\n        };\n    }, [isTracking, toast]);\n\n\n    const filteredCameras = useMemo(() => {\n        if (!initialCameras) return [];\n        \n        let cams = initialCameras;\n\n        if (searchTerm) {\n            const lowerCaseSearch = searchTerm.toLowerCase();\n            cams = cams.filter(camera =>\n                camera.name.toLowerCase().includes(lowerCaseSearch) ||\n                camera.region.toLowerCase().includes(lowerCaseSearch) ||\n                (camera.highway && camera.highway.toLowerCase().includes(lowerCaseSearch)) ||\n                (camera.description && camera.description.toLowerCase().includes(lowerCaseSearch))\n            );\n        }\n        return cams;\n    }, [initialCameras, searchTerm]);\n\n    const handleCameraSelect = (camera: Camera | null) => {\n        setSelectedCamera(camera);\n        if (camera) {\n            setCenter({ lat: camera.latitude, lng: camera.longitude });\n        }\n    };\n    \n    const handleMyLocationClick = () => {\n        setIsTracking(prev => !prev);\n    };\n\n    return (\n        <div className=\"h-screen w-screen flex flex-col bg-background\">\n            <Header \n                cameraCount={filteredCameras.length}\n                searchTerm={searchTerm}\n                onSearchChange={setSearchTerm}\n                onMyLocationClick={handleMyLocationClick}\n                isTracking={isTracking}\n            />\n            <main className=\"flex-1 relative\">\n                <MapDisplay\n                    cameras={filteredCameras}\n                    onCameraSelect={handleCameraSelect}\n                    selectedCamera={selectedCamera}\n                    userLocation={userLocation}\n                    center={center}\n                />\n            </main>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}